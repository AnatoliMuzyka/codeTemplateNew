<!DOCTYPE html>
<html>
  <head>
    <title>Сохранить/загрузить настройки формы отчета из/в ХранилищеОбщихНастроек</title>
  </head>
  <body>
	<h1>Сохранить/загрузить настройки формы отчета из/в ХранилищеОбщихНастроек</h1>
	<h2>Сохранить настройки формы отчета в ХранилищеОбщихНастроек</h2>
    <p>
		<code>
			<pre>
	&НаСервере
	процедура СохранитьЗначенияРеквезитов()
		
		ОписаниеНастройки = Новый ОписаниеНастроек;
		ОписаниеНастройки.Представление = "ПараметрыНастройкиОтчета";//название параметров
		ПараметрыНастройкиОтчета=новый структура;
		ПараметрыНастройкиОтчета.Вставить("НачалоПериода", отчет.НачалоПериода);//перечень реквизитов 
		ПараметрыНастройкиОтчета.Вставить("КонецПериода", отчет.КонецПериода); // отчет-обращение к основному реквизиту формы
		ПараметрыНастройкиОтчета.Вставить("Организация", отчет.Организация);
		ХранилищеОбщихНастроек.Сохранить(ЭтаФорма, "ПараметрыНастройкиОтчета", ПараметрыНастройкиОтчета, ОписаниеНастройки);
		
	КонецПроцедуры

	&НаКлиенте
	Процедура ПриЗакрытии(ЗавершениеРаботы)
		СохранитьЗначенияРеквезитов();
	КонецПроцедуры

			</pre>
		</code>
	</p>
	<h2>загрузить настройки формы отчета из ХранилищеОбщихНастроек</h2>
    <p>
		<code>
			<pre>
	&НаСервере
	Процедура ВостановитьНастроки()
		ОписаниеНастройки = Новый ОписаниеНастроек;
		ОписаниеНастройки.Представление = "ПараметрыНастройкиОтчета";
		
		ПараметрыНастройкиОтчета=ХранилищеОбщихНастроек.Загрузить(ЭтаФорма, "ПараметрыНастройкиОтчета",  ОписаниеНастройки);
		Если ПараметрыНастройкиОтчета<>Неопределено тогда
			ЗаполнитьЗначенияСвойств(отчет,ПараметрыНастройкиОтчета); //отчет - основной реквизит формы отчета
		КонецЕсли;
		
	КонецПроцедуры

	&НаКлиенте
	Процедура ПриОткрытии(Отказ)
		 ВостановитьНастроки()
	 КонецПроцедуры
			</pre>
		</code>
	</p>
 </body>
</html>